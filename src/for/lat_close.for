C
C SUBROUTINE LAT_CLOSE
C $Log:   GXAFXT:[GOLS]LAT_CLOSE.FOV  $
C  
C     Rev 1.0   17 Apr 1996 13:48:06   HXK
C  Release of Finland for X.25, Telephone Betting, Instant Pass Thru Phase 1
C  
C     Rev 1.0   21 Jan 1993 16:49:52   DAB
C  Initial Release
C  Based on Netherlands Bible, 12/92, and Comm 1/93 update
C  DEC Baseline
C
C ** Source - latsubs.for **
C
C
C
C
C=======OPTIONS /CHECK=NOOVERFLOW
	SUBROUTINE LAT_CLOSE(LAT_CHANNEL, ST)
	IMPLICIT NONE
C
        INCLUDE 'INCLIB:SYSPARAM.DEF'
        INCLUDE 'INCLIB:SYSEXTRN.DEF'
        INCLUDE 'INCLIB:GLOBAL.DEF'
C
        INCLUDE '($SYSSRVNAM)'
        INCLUDE '($IODEF)'
        INCLUDE '($SSDEF)'
C
C
C DEFINE STRUCTURES TO MAINTAIN IO STATUS BLOCKS AND BUFFER
C NUMBERS.
C
	STRUCTURE /LT_IOSSTRUCT/
          INTEGER*2 STAT                          !VMS STATUS
          INTEGER*2 XSIZE                         !TRANSFER SIZE
          INTEGER*4 PARM                          !PARAMETER/BUFFER ADDRESS
        END STRUCTURE
C
	RECORD /LT_IOSSTRUCT/    LOCAL_IOSB	!IO STATUS BLOCK
C
        INTEGER*4    DISCON_FUNCOD
        PARAMETER   (DISCON_FUNCOD = IO$_TTY_PORT +
     *                               IO$M_LT_DISCON)
C
	INTEGER*4	LAT_CHANNEL
	INTEGER*4	ST
C
C
C
D	TYPE *,'DISCONNECTING THE TERMINAL SERVER'
        ST = SYS$ QIOW (,%VAL(LAT_CHANNEL),
     *		        %VAL(DISCON_FUNCOD),
     *                  LOCAL_IOSB,,,,,,,,)
	IF(LOCAL_IOSB.STAT .NE. SS$_NORMAL) THEN
	   CALL LIB$SIGNAL(%VAL(LOCAL_IOSB.STAT))
	   ST=LOCAL_IOSB.STAT
	   GOTO 10000
	ELSE IF(ST.NE.SS$_NORMAL) THEN
	   CALL LIB$SIGNAL(%VAL(ST))
	   GOTO 10000
	ENDIF
C
C DEASSIGN THE CHANNEL
C
D	TYPE *,'DEASSIGNING THE CHANNEL'
        ST = SYS$CANCEL(%VAL(LAT_CHANNEL))
        ST = SYS$DASSGN(%VAL(LAT_CHANNEL))
C
10000	CONTINUE
	RETURN
	END
