C
C SUBROUTINE DWNINT
C $Log:   GXAFXT:[GOLS]DWNINT.FOV  $
C  
C     Rev 1.0   17 Apr 1996 13:03:12   HXK
C  Release of Finland for X.25, Telephone Betting, Instant Pass Thru Phase 1
C  
C     Rev 1.0   21 Jan 1993 16:11:20   DAB
C  Initial Release
C  Based on Netherlands Bible, 12/92, and Comm 1/93 update
C  DEC Baseline
C
C ** Source - dwnsub.for **
C
C
C
C SUBROUTINE TO INITIALIZE WINNER SELECTION COMMON
C
C
C=======OPTIONS /CHECK=NOOVERFLOW
	SUBROUTINE DWNINT(FILES,FILCNT)
	IMPLICIT NONE
C
	INCLUDE 'INCLIB:SYSPARAM.DEF'
	INCLUDE 'INCLIB:SYSEXTRN.DEF'
	INCLUDE 'INCLIB:GLOBAL.DEF'
	INCLUDE 'INCLIB:CONCOM.DEF'
	INCLUDE 'INCLIB:NBRCOM.DEF'
	INCLUDE 'INCLIB:DWNCOM.DEF'
	INCLUDE 'INCLIB:DNBREC.DEF'
	INCLUDE 'INCLIB:GTNAMES.DEF'
	INTEGER*4 FDB(7),FILES(6,*)
	INTEGER*4 FILCNT, GIND, DRAW, ST, GNUM
	INTEGER*4 FILEX(6),I
	CHARACTER*80 FILEXC
	EQUIVALENCE (FILEXC,FILEX)
C
	INTEGER*4   NVOL
	CHARACTER*4 CXNVOL
	EQUIVALENCE (NVOL,CXNVOL)
	INTEGER*4   INPLEN
C
C
	NVOL=0
	FILCNT=0
	CALL FASTSET(0,WINTAB,2*NUMAGT)
	CALL FASTSET(-1000,LNBDRW,NUMNBR)
	DO 100 GIND=1,NUMNBR
	IF(NBRDRW(GIND).LT.1) GOTO 100
	FILCNT=FILCNT+1
	FILES(6,FILCNT)=TNBR
	IF(NVOL.EQ.0) THEN
     	  CALL PRMTEXT('Enter Numbers draw pack volume name:',
     *                  CXNVOL, INPLEN)
	ENDIF
	GNUM=GTNTAB(TNBR,GIND)
	WRITE (FILEXC,900) NVOL,GSNAMES(GNUM),DAYCDC
	DO 110 I=1,5
	  FILES(I,FILCNT) = FILEX(I)
110	CONTINUE
	IF(NBRDAT(CURDRW,GIND).NE.DAYCDC) GOTO 100
	DRAW=NBRDRW(GIND)
	WRITE(5,930) IAM(),GTNAMES(TNBR),GIND,DRAW
	CALL OPENW(1,GFNAMES(1,GNUM),4,0,0,ST)
	CALL IOINIT(FDB,1,DNBSEC*256)
	IF(ST.NE.0) CALL FILERR(GFNAMES(1,GNUM),1,ST,0)
	CALL READW(FDB,DRAW,DNBREC,ST)
	IF(ST.NE.0) CALL FILERR(GFNAMES(1,GNUM),2,ST,DRAW)
	CALL LOGGAM(TNBR,GIND,DNBREC,LNBSTS)
	IF(LNBSTS(GIND).LT.GAMENV) THEN
	  WRITE(5,920) IAM(),GTNAMES(TNBR),GIND,LNBSTS(GIND),GAMENV
	  CALL GPAUSE
	ENDIF
	LNBTAX(GIND)=0
	CALL FASTSET(0,LNBSAL(1,1,GIND),NUMTOT*NBGPOL)
	CALL FASTSET(0,LNBWON(1,1,1,GIND),NUMTOT*NBGPOL)
	CALL CLOSEFIL(FDB)
100	CONTINUE
	RETURN
C
C
900	FORMAT(A4,':',A4,I4.4,'.FIL')
920	FORMAT(1X,A,1X,A8,I1,' invalid game status> ',I4,' should be> ',I4)
930	FORMAT(1X,A,1X,'Loading game date for ',A8,I1,' draw> ',I4,
     *	       ' winner selection')
	END
