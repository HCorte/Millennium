C PROCOM.DEF
C  
C V17 20-NOV-2020 SCML Added OLM suport for NEW TERMINALS PROJECT
C V16 08-MAR-2016 SCML Added BPRO offset, BWRKTAB, for WRKTAB
C V15 24-FEB-2014 SCML Added support for IGS
C V14 06-JAN-2011 FJG MILLENNIUM MXSRV
C V13 15-MAR-2010 RXK TYPEPC,TYPEPD added for ePassive
C V12 09-MAY-2001 CS  CHANGED WORKTAB OFFSET TO 81
C V11 09-NOV-2000 UXN GUI added.
C V10 29-SEP-2000 UXN TYPAGTINF added (Online Agent Update)
C V09 01-FEB-1999 UXN Added TYPUNF for Unfractioned Wager 2nd Phase.
C V08 11-OCT-1993 HXK Fixed TY65s (they had same values as Spede. 
C V07 28-SEP-1993 LMK INSTALLED RFSS 10167  
C V06 21-JUL-1993 GXA Added TYPFRA for Fractioned Wager 2nd Phase. 
C V05 18-JUN-1993 SXK Added RAVI (cancellations and deletions)
C V04 11-MAY-1993 HXK Added Speden game (Cancellations, Deletions)
C V03 21-JAN-1993 DAB Initial Release
C                     Based on Netherlands Bible, 12/92, and Comm 1/93 update
C                     DEC Baseline
C V02 07-OCT-1991 MTK INITAL RELEASE FOR NETHERLANDS
C V01 01-AUG-1990 XXX RELEASED FOR VAX
C
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C This item is the property of GTECH Corporation, Providence, Rhode
C Island, and contains confidential and trade secret information. It
C may not be transferred from the custody or control of GTECH except
C as authorized in writing by an officer of GTECH. Neither this item
C nor the information it contains may be used, transferred,
C reproduced, published, or disclosed, in whole or in part, and
C directly or indirectly, except as expressly authorized by an
C officer of GTECH, pursuant to written agreement.
C
C Copyright 1991 GTECH Corporation. All rights reserved.
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C
C
C FORTRAN PROCOM DESCRIPTION
C
C PROCOM CONTAINS THE TRANSACTION PROCESSING BUFFER
C POOL, FREE BUFFER QUEUE, AND THE INPUT/OUTPUT QUEUES.
C
C  EACH BUFFER CONSISTS OF TWO SEPARATE AREAS:
C   1  - HEADER             (192 BYTES)
C   2  - INPUT/OUTPUT/WORK  (320 BYTES)
C
C
C     PRO(PROLEN,NUMPRO)        SYSTEM PROCESSING BUFFERS
C     FRETST                    FREE QUEUE CRITICAL REGION FLAG
C     FREEQ(NUMPRO+QHEDSZ)           FREE BUFFER QUEUE
C     INPTST                    INPUT QUEUE CRITICAL REGION FLAG
C     INQUE                     INPUT BUFFER QUEUE
C     SYSTIM                    SYSTEM TIME SET BY TIMER
C     PRFQUE(STALEN+QHEDSZ)     PERFORMANCE STATISTICS
C     GAME_OUTQUE(NUMPRO+QHEDSZ) OUTPUT QUEUE FOR THE GAME 
C     FILLER                    FILLER ROUNDS SIZE TO NEXT 4K
C
	INCLUDE 'INCLIB:PRMPRO.DEF'
C
C PROCOM BUFFER HALFWORD OFFSETS
C
C     PARAMETERS 1-6 RESERVED FOR NEW COM ????? (CONCURRENT ONLY)
C
	INTEGER*4  PRCSRC, X2X_COM, PRCDST, QUENUM
	INTEGER*4  MXS_COM        !MXSRV
    INTEGER*4  OLM_COM        !OLIMPO (tipo novo de comunicacoes "MessageQ")	
	PARAMETER (PRCSRC=7)      !COMMUNICATIONS PROCESSOR ID
	   PARAMETER (X2X_COM=13) ! X2X COMMUNICATION SUBSYSTEM (valores possiveis para o PRCSRC)
	   PARAMETER (MXS_COM=14) ! MXSRV (valores possiveis para o PRCSRC)
	   PARAMETER (OLM_COM=15) ! V17 - OLIMPO (valores possiveis para o PRCSRC)	   
	PARAMETER (PRCDST=8)      !APPLICATIONS PROCESSOR ID
	PARAMETER (QUENUM=9)      !COMMUNICATIONS QUEUE NUMBER
C
	   INTEGER*4  QSET, QFREE, QIN, QOUT, QTASK, QX2X_WAIT
	   PARAMETER (QSET=0)     !BEING SET
	   PARAMETER (QFREE=-1)   !FREE TO USE
	   PARAMETER (QIN=-2)     !IN INPUT QUEUE
	   PARAMETER (QOUT=-3)    !IN OUTPUT QUEUE
	   PARAMETER (QTASK=-4)   !IN ONE OF APPLICATION QUEUES
	   PARAMETER (QX2X_WAIT=-5) !WAIT TO BE DEQUEUED IN X2 SUBSYSTM
C                               ;THIS ERROR SITUATION, TRANSACTION
C                               ;FOR THIS TERMINAL IS IN THE GAME
C                               ;VALUES 1,2...,CORRESPOND TO LINE NR
C                               ;WHEN BUFFERED QUEUED TO LINES
C
	INTEGER*4  TRCODE
	PARAMETER (TRCODE=10)      !TRANSACTION CODE
C
	    INTEGER*4  TYPREG, TYPUNS, TYPBRO, TYPCMD, TYPDEL
	    INTEGER*4  TYPERR, TYPCOM, TYPECH, TYPWCN, TYPWDL, TYPNCN
	    INTEGER*4  TYPNDL, TYPNON, TYPHSF, TYPPAS, TYPFRA, TYPUNF
	    INTEGER*4  TYPX2X_RELAY, TYPX2X_PRO, TYPX2X_RELAY_TIMOUT
	    INTEGER*4  TYPX2X_RELAY_DELACK,TYPX2X_RELAY_DELERR
	    INTEGER*4  TYPX2X_RELAY_CMD
	    INTEGER*4  TYPOCN, TYPODL
	    INTEGER*4  TYPPCN, TYPPDL
            INTEGER*4  TYPCRS, TYPCWT, TYPSSI, TYPSSU
            INTEGER*4  TYPFPT, TYPAGTINF, TYPGUI
C Euro Mil project
            INTEGER*4  TYPEUR
C ePassive
            INTEGER*4  TYPEPC,TYPEPD
C
	    PARAMETER (TYPREG=1)  !REGULAR TRANSACTION
	    PARAMETER (TYPUNS=2)  !UNSOLICITED MESSAGE
	    PARAMETER (TYPBRO=3)  !BROADCAST MESSAGE
	    PARAMETER (TYPCMD=4)  !COMMAND TRANSACTION
	    PARAMETER (TYPDEL=5)  !DELETION TRANSACTION
	    PARAMETER (TYPERR=6)  !ERROR MESSAGE TRANSACTION
	    PARAMETER (TYPCOM=7)  !COMMUNICATIONS COMMAND
	    PARAMETER (TYPECH=8)  !EXCHANGE TRANSACTION
	    PARAMETER (TYPWCN=9)  !LOTTO/SPORTS CANCELLATION
	    PARAMETER (TYPWDL=10) !LOTTO/SPORTS DELETION
	    PARAMETER (TYPNCN=11) !NUMBERS CANCELLATION
	    PARAMETER (TYPNDL=12) !NUMBERS DELETION
	    PARAMETER (TYPNON=13) !TERMINAL NOT RESPONDING
	    PARAMETER (TYPHSF=14) !HASF FINANCIAL TRANSACTION
	    PARAMETER (TYPPAS=15) !PASSWORD MANAGMENT TRANSACTION
	    PARAMETER (TYPFRA=16) !FRACTION WAGER 2ND PHASE
	    PARAMETER (TYPX2X_RELAY=17)!RELAY MESSAGE FOR X2X SUBSYSTEM
	    PARAMETER (TYPX2X_PRO=18)          !X2XPRO MESSAGE
	    PARAMETER (TYPX2X_RELAY_TIMOUT=19) !RELAY TIMEOUT MESSAGE
	    PARAMETER (TYPX2X_RELAY_DELACK=20) !RELAY DEL ACK MESSAGE
	    PARAMETER (TYPX2X_RELAY_DELERR=21) !RELAY DEL ERR MESSAGE
	    PARAMETER (TYPX2X_RELAY_CMD=22)    !RELAY COMMAND MESSAGE
	    PARAMETER (TYPOCN=23)              !ODDS GAME CANCELLATION
	    PARAMETER (TYPODL=24)              !ODDS GAME DELETION
	    PARAMETER (TYPPCN=25)              !BINGO GAME CANCELLATION
            PARAMETER (TYPPDL=26)              !BINGO GAME DELETION
            PARAMETER (TYPCRS=29)              !CROSS SYSTEM TRANSACTION
            PARAMETER (TYPCWT=30)              !CHECK WRITER TRANSACTION
            PARAMETER (TYPSSI=31)              !INTRASYSTEM CENTRAL TRANSACTION
            PARAMETER (TYPSSU=32)              !INTRASYSTEM STRATUS TRANSACTION
            PARAMETER (TYPFPT=33)              !FINANCIAL PASS_THROUGH
	    PARAMETER (TYPGUI=34)              !GUIMGR
            PARAMETER (TYPUNF=35)              !UNFRACTION WAGER 2ND PHASE
	    PARAMETER (TYPAGTINF=36)           !ONLINE AGENT UPDATE
	    PARAMETER (TYPEUR=37)   	       !EURO MIL TRANSACTION
            PARAMETER (TYPEPC=38)              !EPASSIVE CANCELLATION
            PARAMETER (TYPEPD=39)              !EPASSIVE DELETION
C
            INTEGER*4 TYPMXL                   !MXSRV
            PARAMETER (TYPMXL=40)              !MXSRV            
C----+------------------------------------------------------------------
C V15| Adding support for IGS
C----+------------------------------------------------------------------
            INTEGER*4  TYPIGS
            PARAMETER (TYPIGS=41)              !IGS - Odds Set 
C----+------------------------------------------------------------------
C V15| Adding support for IGS
C----+------------------------------------------------------------------
C
	INTEGER*4  TERNUM, LINENO, SIMMOD, MSGNUM, OUTLEN, INPLEN
	PARAMETER (TERNUM=11)      !TERMINAL NUMBER
	PARAMETER (LINENO=12)      !LINE NUMBER OR SAP NUMBER
	PARAMETER (SIMMOD=12)      !SIMULATION  MODE (-999 FOR SIM)
	PARAMETER (MSGNUM=13)      !MESSAGE NUMBER
	PARAMETER (OUTLEN=14)      !OUTPUT MESSAGE LENGTH
	PARAMETER (INPLEN=14)      !INPUT MESSAGE LENGTH
C
	INTEGER*4  ENCOVR, SYSKEY, DFTKEY
	PARAMETER (ENCOVR=15)      !ENCRYPTION OVERRIDE FLAG
	    PARAMETER (SYSKEY=26796)        !SYSTEM ENCRYPTION KEY
	    PARAMETER (DFTKEY=65535-SYSKEY) !DEFALT BROADCAST KEY
C
	INTEGER*4  BUFSTA, SPCFUN, TRMNDX
	PARAMETER (BUFSTA=16)     !BUFFER OUTPUT STATUS
	PARAMETER (SPCFUN=17)     !SPECIAL FUNCTION
	PARAMETER (TRMNDX=18)     !INDEX TO TERMINAL LIST
C
	INTEGER*4  X2X_LINK, X2X_DEST
	PARAMETER (X2X_LINK=19)   !POINTER TO WAIT LIST FOR X2X BUFFERS
C                               ;IF MORE THEN 1 MESS FROM TERMINAL
	PARAMETER (X2X_DEST=20)   !DESTINATION X2X SUBSYSTEM LAYERS
C                                BIT MASK
	  INTEGER*4  X2DEST_FE, X2DEST_STATION, X2DEST_RETURN
	  PARAMETER (X2DEST_FE=1)        !FRONT-END MESSAGE
	  PARAMETER (X2DEST_STATION=2)   !STATION MESSAGE
	  PARAMETER (X2DEST_RETURN=4)    !APPLICATION MESSAGE
C
	  INTEGER*4  X2DEST_TRANSPORT, X2DEST_UNSOLICIT
	  PARAMETER (X2DEST_TRANSPORT=8) !TRANSPORT LAYER MESSAGE
	  PARAMETER (X2DEST_UNSOLICIT=16)!UNSOLICITED MESSAGE (SET
C                                       ONLY FOR APPLICATION MESSAGE
C
	  INTEGER*4  X2DEST_BROADCAST, X2DEST_APP, X2DEST_APP_UNSOLICIT
	  PARAMETER (X2DEST_BROADCAST=32)! BROADCAST MESSAGE
	  PARAMETER (X2DEST_APP=X2DEST_RETURN+X2DEST_UNSOLICIT+
     *	                        X2DEST_BROADCAST)
	  PARAMETER (X2DEST_APP_UNSOLICIT=X2DEST_FE+X2DEST_STATION+
     *	                        X2DEST_TRANSPORT+X2DEST_UNSOLICIT)
C
	  INTEGER*4  X2DEST_APP_BROADCAST, X2DEST_APP_STATION
	  PARAMETER (X2DEST_APP_BROADCAST=X2DEST_FE+X2DEST_STATION+
     *	                        X2DEST_TRANSPORT+X2DEST_BROADCAST)
	  PARAMETER (X2DEST_APP_STATION=X2DEST_FE+X2DEST_STATION+
     *	                                X2DEST_TRANSPORT)
C
	  INTEGER*4  X2DEST_RELEASE
	  PARAMETER (X2DEST_RELEASE=64) ! RELEASE THIS BUFFER
C
	INTEGER*4  X2X_CONNCTL_OVR, X2X_DELIVER_OVR, X2X_HOST_ID
	PARAMETER (X2X_CONNCTL_OVR=21)   !CONNECTION CONTROL OVERRIDE
C                                      ;HIGH FRONT-END STATION FLAG,
C                                      ;LOW BYTE STATION FLAG
	PARAMETER (X2X_DELIVER_OVR=22)   !DELIVERY CONTROL OVERRIDE
	PARAMETER (X2X_HOST_ID=23)       !HOST ID FIELD TO BE SET IN FE
C
C     PARAMETERS USED BY REMPRO SUBSYSTEM
C
	INTEGER*4  REMSTS
	PARAMETER (REMSTS=33)     !SENDING TO REMOTE SYSTEM STATUS
C
	   INTEGER*4  RMGOOD, RMTMOT, RMDOWN, RMXMIT, RMLATE, RMMAX
	   PARAMETER (RMGOOD=0)   !TRANSACTION RECEIVED OK
	   PARAMETER (RMTMOT=1)   !TRANSACTION TIMOUT
	   PARAMETER (RMDOWN=2)   !REMOTE SYSTEM DOWN/DEAD/NOT COFIGURED
	   PARAMETER (RMXMIT=3)   !TRANSACTION IN XMIT
	   PARAMETER (RMLATE=4)   !LATE TRANSACTION (CAME AFTER TIMOUT)
	   PARAMETER (RMMAX=5)    !TO MANY TRANSACTIONS IN PROGREESS
C
	INTEGER*4  REMRET
	PARAMETER (REMRET=34)     !RETURN CODE, -1 IF ROUTED BACK
C                               ;ON REMOTE SYSTEM -1 IF SHOULD BE
C                               ;ROUTED BACK, -2 IF FINAL PHASE
C                               ;IF TRANSACTION IS RELEASED TO COM
C                               ;REMRET HAS TO BE SET TO 0
C
C
	INTEGER*4  REMWAY, REMNOD, BAKTIM, FWDTIM
	PARAMETER (REMWAY=35)     !WAY IT CAME FROM
	PARAMETER (REMNOD=36)     !NODE IT CAME FROM
	PARAMETER (BAKTIM=38)     !BACK LINK FOR TIMEOUT
	PARAMETER (FWDTIM=39)     !FORWARD LINK FOR TIMOUT
C
	INTEGER*4  REMBUF, NBRTRA, NUMLRC, NUMLSK
	PARAMETER (REMBUF=40)     !REMOTE SYSTEM BUFFER #
	PARAMETER (NBRTRA=41)     !# OF TRANSACTIONS IN BUFFER
	PARAMETER (NUMLRC=42)     !# OF LOG RECORDS FOR THIS TRANS
	PARAMETER (NUMLSK=43)     !# OF LOG RECORDS SKIPPED IN TMF
C
C     PARAMETERS USED FOR SIMULATION (TERMINAL BOUNDS FOR THIS BUF)
C
	INTEGER*4  SIMLTR, SIMHTR
	PARAMETER (SIMLTR=44)     !LOWEST TERMINAL SIMULATED
	PARAMETER (SIMHTR=45)     !HIGEST TERMINAL SIMULATED
C
C     OFFSETS 46-48 ARE AVAILABLE FOR USE
C
		INTEGER*4 MESSID          ! V17 - Message ID from OLM 
		PARAMETER (MESSID=46)     ! V17 - Message ID from OLM
        INTEGER*4 TIMINOFF
		PARAMETER (TIMINOFF = 24) !USING FREE HALFWORD OFFSETS 47-48
		INTEGER*4 SEROLM
		PARAMETER (SEROLM=50)
C
C
C PROCOM BUFFER FULLWORD OFFSETS
C
	INTEGER*4  TIMOFF
	PARAMETER (TIMOFF=29)      !TIME TRANSACTION ENTERED THE SYSTEM
C                            ;IF YOU CHANGE TIMOFF YOU SHOULD CHANGE:
C                              COMDS.MAC,COMDSX.MAC AND COMPILE
C                             QUEMGR,COM,COMX AND REBUILD LOGGER,COM,
C                             COMX
C
C
	INTEGER*4  SERIAL, TSTAMP, REMSER
	PARAMETER (SERIAL=30)     !TRANSACTION SERIAL NUMBER
	PARAMETER (TSTAMP=31)     !TIME STAMP
	PARAMETER (REMSER=32)     !REMOTE SYSTEM SERIAL #
C
C
	INTEGER*4  INPTAB, OUTTAB, OUTLEN_MAX
	PARAMETER (INPTAB=33)     !START INPUT AREA
	PARAMETER (OUTTAB=33)     !START OUTPUT AREA
	PARAMETER (OUTLEN_MAX=(PROLEN-OUTTAB+1)*4) !MAX LENGTH OF OUTPUT
C                                              ;MESSAGE IN BYTES
CC	PARAMETER (WRKTAB=65)     !START OF WORK AREA
C
	INTEGER*4 INSTAB,WRKTAB
C----+------------------------------------------------------------------
C V15| Adding support for IGS - extending I/O tab from 192 to 256 bytes
C----+------------------------------------------------------------------
C        PARAMETER (WRKTAB=81)     !START OF WORK AREA
C        PARAMETER (INSTAB=81)     !START OF INSTANT DATA WORK AREA
C                                 !INSTANT TAKE ONE OR TWO LOG RECORDS
        PARAMETER (WRKTAB=97)     !START OF WORK AREA
        PARAMETER (INSTAB=97)     !START OF INSTANT DATA WORK AREA
C                                 !INSTANT TAKE ONE OR TWO LOG RECORDS
C----+------------------------------------------------------------------
C V15| Adding support for IGS
C----+------------------------------------------------------------------
C
C -------------------------------------------------------------------
C
C PROCOM BUFFER BYTE OFFSETS (INDEX INTO BPRO)
C
	INTEGER*4  BINPTAB,BOUTTAB
	PARAMETER (BINPTAB=INPTAB*4-3)! para ir para o primeiro index 132-3=129 
	PARAMETER (BOUTTAB=OUTTAB*4-3)
C
	INTEGER*4  BINSTAB
        PARAMETER (BINSTAB=INSTAB*4-3)

	INTEGER*4 BWRKTAB !V16
	PARAMETER (BWRKTAB=WRKTAB*4-3)

C --------------------------------------------------------------------
C
C     CALCULATE LENGTH FOR FILLER AREA
C
C
C     CALCULATION OF FILLER LENGTH
C     FILLER IS LENGTH NEEDED FOR PROCOM TO FILL TO NEXT 4K BOUNDRY
C
	INTEGER*4  PRCMLEN, PRCMFIL
        PARAMETER (PRCMLEN=PROLEN*NUMPRO + 3*(NUMPRO+QHEDSZ) + 2+1 +
     *                     STALEN+QHEDSZ)
	PARAMETER (PRCMFIL=2048-(PRCMLEN-(PRCMLEN/2048)*2048))
C
C
	COMMON /PROCOM/
     *	      PRO(PROLEN,NUMPRO),
     *	      FRETST,
     *	      FREEQ(NUMPRO+QHEDSZ),
     *	      INPTST,
     *	      INQUE(NUMPRO+QHEDSZ),
     *	      SYSTIM,
     *	      PRFQUE(STALEN+QHEDSZ),
     *	      GAME_OUTQUE(NUMPRO+QHEDSZ),
     *	      FILLER(PRCMFIL)
C
	INTEGER*4  FRETST, FREEQ, INPTST, INQUE
	INTEGER*4  SYSTIM, PRFQUE, GAME_OUTQUE, FILLER
C
	INTEGER*4 PRO
	INTEGER*2 HPRO(PROLEN*2,NUMPRO)
	BYTE      BPRO(PROLEN*4,NUMPRO)!192*4=768,PARAMETER  (NUMPRO=2048)  !NUMBER OF PROCESSING BUFFERS
	EQUIVALENCE (BPRO(1,1), HPRO(1,1), PRO(1,1))
C
	INTEGER*4	 FRST_PROCOM(2)
	EQUIVALENCE	(FRST_PROCOM, PRO)
	INTEGER*4	 LAST_PROCOM
	EQUIVALENCE	(LAST_PROCOM, FILLER(PRCMFIL))
C
	VOLATILE /PROCOM/
C
C END PROCOM.DEF
C
