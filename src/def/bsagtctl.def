C
C     FILE   : BSAGTCTL.DEF
C     AUTHOR : J.H.R
C     VERSION: 01            DATE: 23 / 07 / 2001
C
C
C V02 FRP Modify for EM Joker (17-APR-2009)
C V01 JHR INITIAL RELEASE FOR PORTUGAL PROJECT
C
C BETSLEEP AGENT CONTROL ( CONTROLO DO MIVIMENTO DOS AGENTES )
C
C THIS PROGRAM CALCULATES HOW MANY BETSLEEPS ( MATRICES ) ARE SPEND BY EVERY
C AGENT, AND GENERATES ONE REPORT TO SEND IT TO EACH AGENT.
C
C     **************************************************************************
C
C        THIS ITEM IS THE PROPERTY OF GTECH CORPORATION, POVIDENCE, RHODE
C     ISLAND, AND CONTAINS CONFIDENTIAL AND TRADE SECRET INFORMATION. IT MAY
C     NOT BE TRANSFERRED FROM THE CUSTODY OR CONTROL OF GTECH EXCEPT AS AUTO -
C     RIZED IN WRITING BY AN OFFICER OF GTECH. NEITHER THIS ITEM NOR THE
C     INFORMATION IT CONTAINS MAY BE USED, TRANSFERRED, REPRODUCED, PUBLISHED
C     OR DISCLOSED, IN WHOLE OR IN PART, AND DIRECTLY OR INDIRECTLY, EXCEPT AS
C     EXPRESSLY AUTHORIZED BY AN OFFICER OR GTECH, PURSUANT TO WRITTEN AGREEMENT
C
C     Copyright 2000 GTECH Corporation. All Rigth Reserved
C
C     **************************************************************************
C
C THIS INCLUDE FILE DEFINITION HAVE ALL VARIABLES DEFINITION TO GENERATE 
C "CONTROLO DO MOVIMENTO DOS AGENTES" REPORT
C
      INCLUDE 'INCLIB:SYSPARAM.DEF'
      INCLUDE 'INCLIB:SYSEXTRN.DEF'
      INCLUDE 'INCLIB:AGTINF.DEF'
      INCLUDE 'INCLIB:GLOBAL.DEF'
      INCLUDE 'INCLIB:PRMAGT.DEF'
C
C CONSTANT VARIABLES DEFINITION ( GENERAL )
C
      INTEGER * 4 MTMFIL, ASFFIL, MTXFIL, MTX
C 
      PARAMETER(MTMFIL = 1)                ! TRANSACTION MASTER FILE TYPE
      PARAMETER(ASFFIL = 2)                ! AGENT SALES FILE TYPE
      PARAMETER(MTXFIL = 3)                ! MATRIX AGENT FILE TYPE
      PARAMETER(MTX = 9999)                ! MATRIX FILE TABLE PARAMETERS
C
C CONSTANT PARAMETERS DEFINITION TO GENERATE "CONTROLO DO MOVIMENTO" REPORT
C
      INTEGER * 4 MAXTOT, MAXWEK, MAXWAG, TOTCNT, TOTWAG, TOTJOK, WEEK1, WEEK5
C
      PARAMETER(MAXTOT = 3)     ! MAXIMUN NUMBER OF TOTALS ( COUNTER / WAGERS )
        PARAMETER(TOTCNT = 1)   ! BETSLEEP TOTAL COUNTER POSITION
        PARAMETER(TOTWAG = 2)   ! BETSLEEP TOTAL WAGER POSITION
        PARAMETER(TOTJOK = 3)   ! BETSLEEP TOTAL WAGER / COUNTER JOKER POSITION
      PARAMETER(MAXWEK = 2)     ! MAXIMUN NUMBER OF WEEKS ( 1 OR 5 )
        PARAMETER(WEEK1 = 1)    ! WEEK POSITION FOR 1 WEEK
        PARAMETER(WEEK5 = 2)    ! WEEK POSITION FOR 5 WEEK
      PARAMETER(MAXWAG = 39)    ! MAXIMUN NUMBER OF COMBINATIONS WAGERS
C
      INTEGER * 4 RPTMAXGAM, LOTGAM, TBLGAM, LO2GAM, TGLGAM, JOKGAM
C
      PARAMETER(RPTMAXGAM = 5)  ! MAXIMUM NUMBER OF GAMES IN THE REPORT
        PARAMETER(TBLGAM = 1)   ! TOTOBOLA GAME POSITION
        PARAMETER(TGLGAM = 2)   ! TOTOGOLO GAME POSITION
        PARAMETER(LOTGAM = 3)   ! LOTO GAME POSITION
        PARAMETER(LO2GAM = 4)   ! LOTO 2 GAME POSITION
        PARAMETER(JOKGAM = 5)   ! JOKER GAME POSITION
C
      INTEGER * 4 MAXTIPW, SMPWAG, MLTWAG
C
      PARAMETER(MAXTIPW = 2)    ! MAXIMUN NUMBER OF WAGERS TYPES
        PARAMETER(SMPWAG = 1)   ! SIMPLE WAGER POSITION
        PARAMETER(MLTWAG = 2)   ! MULTIPLE WAGER POSITION
C
      INTEGER * 4 MAXMFCADR, MAXMFCNAM
C
      PARAMETER(MAXMFCADR = (LSTRT / 4) + 1)
      PARAMETER(MAXMFCNAM = (LNAME / 4) + 1)
C
C CONSTAN PARAMETER FOR EURO CONVERSIONS ( EURO / ESCUDOS ) 
C
      INTEGER * 4 ESC, EUR
C
      PARAMETER(ESC = 1)        ! ESCUDO CURRENCY
      PARAMETER(EUR = 2)        ! EURO CURRENCY
C
C VARIABLES DEFINITION TO DEFINE FILE WHEN PROGRAM SAVE ALL AGENT INFORMATION
C ( MATRIZ FILE CONTROL )
C
C INTEGER * 4 MFCLOK                                  ! AGENT RECORD LOCK FLAG
C INTEGER * 4 MFCAGT                                  ! AGENT ACTIVITY CONTROL
C INTEGER * 4 MFCWSB(MAXTOT, MAXWEK, MAXGAM, MAXWAG)  ! SIMPLE WAGERS CONTROL
C INTEGER * 4 MFCWMB(MAXTOT, MAXWEK, MAXGAM, MAXWAG)  ! MULTIPLE WAGERS CONTROL
C INTEGER * 4 MFCTGA                                  ! AGENT GROSS WAGER AMT. 
C INTEGER * 4 MFCCNA                                  ! AGENT COMMISION NET AMT.
C INTEGER * 4 MFCTNA                                  ! AGENT NET WAGER AMOUNT
C INTEGER * 4 MFCWNA                                  ! WAGERS NET AMOUNT
C INTEGER * 4 MFCWAC                                  ! WAGERS AGENT COMISION
C INTEGER * 4 MFCNAM(MAXMFCNAM)                       ! AGENT NAME
C INTEGER * 4 MFCADR(MAXMFCADR)                       ! AGENT ADRESS
C INTEGER * 4 MFCCTY((LZIPA / 4) + 1)                 ! AGENT CITY NAME
C INTEGER * 4 MCFZCD                                  ! AGENT ZIP CODE
C INTEGER * 4 MCFALD                                  ! AGENT DISTRIBUTION LINE
C INTEGER * 4 MCFACR                                  ! AGENT RECEPTION CENTER
C
      INTEGER * 4 MFCLOK
      INTEGER * 4 MFCAGT
      INTEGER * 4 MFCWSB(MAXTOT, MAXWEK, RPTMAXGAM, MAXWAG)
      INTEGER * 4 MFCWMB(MAXTOT, MAXWEK, RPTMAXGAM, MAXWAG)
      INTEGER * 4 MFCTGA
      INTEGER * 4 MFCCNA
      INTEGER * 4 MFCTNA
      INTEGER * 4 MFCWNA
      INTEGER * 4 MFCWAC
      INTEGER * 4 MFCNAM(MAXMFCNAM)
      INTEGER * 4 MFCADR(MAXMFCADR)
      INTEGER * 4 MFCCTY((LZIPA / 4) + 1)
      INTEGER * 4 MCFZCD
      INTEGER * 4 MCFALD
      INTEGER * 4 MCFACR
      INTEGER * 4 MFCFRE
C
C RECORD OFFSET PARAMETERS DEFINITION
C
      INTEGER * 4 MFCLOK_OFF
      INTEGER * 4 MFCAGT_OFF
      INTEGER * 4 MFCWSB_OFF
      INTEGER * 4 MFCWMB_OFF
      INTEGER * 4 MFCTGA_OFF
      INTEGER * 4 MFCCNA_OFF
      INTEGER * 4 MFCTNA_OFF
      INTEGER * 4 MFCWNA_OFF
      INTEGER * 4 MFCWAC_OFF
      INTEGER * 4 MFCNAM_OFF
      INTEGER * 4 MFCADR_OFF
      INTEGER * 4 MFCCTY_OFF
      INTEGER * 4 MCFZCD_OFF
      INTEGER * 4 MCFALD_OFF
      INTEGER * 4 MCFACR_OFF
      INTEGER * 4 MFCFRE_OFF
C
C INITIATE OFFSET PARAMETERS DEFINITION
C
      PARAMETER(MFCLOK_OFF = 1)
      PARAMETER(MFCAGT_OFF = MFCLOK_OFF + 1)
      PARAMETER(MFCWSB_OFF = MFCAGT_OFF + 1)
      PARAMETER(MFCWMB_OFF = MFCWSB_OFF + MAXTOT * MAXWEK * RPTMAXGAM * MAXWAG)
      PARAMETER(MFCTGA_OFF = MFCWMB_OFF + MAXTOT * MAXWEK * RPTMAXGAM * MAXWAG)
      PARAMETER(MFCCNA_OFF = MFCTGA_OFF + 1)
      PARAMETER(MFCTNA_OFF = MFCCNA_OFF + 1)
      PARAMETER(MFCWNA_OFF = MFCTNA_OFF + 1)
      PARAMETER(MFCWAC_OFF = MFCWNA_OFF + 1)
      PARAMETER(MFCNAM_OFF = MFCWAC_OFF + 1)
      PARAMETER(MFCADR_OFF = MFCNAM_OFF + MAXMFCNAM)
      PARAMETER(MFCCTY_OFF = MFCADR_OFF + MAXMFCADR)
      PARAMETER(MCFZCD_OFF = MFCCTY_OFF + (LZIPA / 4) + 1)
      PARAMETER(MCFALD_OFF = MCFZCD_OFF + 1)
      PARAMETER(MCFACR_OFF = MCFALD_OFF + 1)
      PARAMETER(MFCFRE_OFF = MCFACR_OFF + 1)
C
C CALCULATE FREE SPACE BASED ON MACHINE DEPENDENT SECTOR SIZES. SHOULD ALLWAYS
C ADD UP TO A EVEN SECTOR SIZE BYTES (VAX 512).
C
C NOTE: 
C
C       IN CALCULATIONS, FRE_OFF - 2 IS DONE TO TAKE CARE OF WHEN THE DATA SIZE
C       ENDS ON A EVEN SECTOR SIZE.
C
      INTEGER * 4 MFCSEC_VAX
      INTEGER * 4 MFCSEC_NUM
      PARAMETER(MFCSEC_VAX = SECSIZE / 4)
      PARAMETER(MFCSEC_NUM = NINT(FLOAT((MFCFRE_OFF - 2) / MFCSEC_VAX) + .5))
C
      INTEGER * 4 MFCLEN
      INTEGER * 4 MFCSEC
      PARAMETER(MFCLEN = MFCSEC_VAX * MFCSEC_NUM)       ! EVEN SEC SIZE.
      PARAMETER(MFCSEC = MFCLEN / 64)
C
C DEFINE MATRIZ FILE CONTROL REGISTER
C
      INTEGER * 4 MFCREC(MFCLEN)
C
C DEFINE RECORD FILE EQUIVALENCES
C
      EQUIVALENCE(MFCREC(MFCLOK_OFF), MFCLOK)
      EQUIVALENCE(MFCREC(MFCAGT_OFF), MFCAGT)
      EQUIVALENCE(MFCREC(MFCWSB_OFF), MFCWSB)
      EQUIVALENCE(MFCREC(MFCWMB_OFF), MFCWMB)
      EQUIVALENCE(MFCREC(MFCTGA_OFF), MFCTGA)
      EQUIVALENCE(MFCREC(MFCCNA_OFF), MFCCNA)
      EQUIVALENCE(MFCREC(MFCTNA_OFF), MFCTNA)
      EQUIVALENCE(MFCREC(MFCWNA_OFF), MFCWNA)
      EQUIVALENCE(MFCREC(MFCWAC_OFF), MFCWAC)
      EQUIVALENCE(MFCREC(MFCNAM_OFF), MFCNAM)
      EQUIVALENCE(MFCREC(MFCADR_OFF), MFCADR)
      EQUIVALENCE(MFCREC(MFCCTY_OFF), MFCCTY)
      EQUIVALENCE(MFCREC(MCFZCD_OFF), MCFZCD)
      EQUIVALENCE(MFCREC(MCFALD_OFF), MCFALD)
      EQUIVALENCE(MFCREC(MCFACR_OFF), MCFACR)
      EQUIVALENCE(MFCREC(MFCFRE_OFF), MFCFRE)
C
C COMMOM VARIABLES TO WORK WITH ( MATRIZ MEMORY CONTROL )
C
      INTEGER * 4 MTXFILNAME(5)   ! MATRIX FILE NAME
      INTEGER * 4 REPCDC          ! REPORT CDC VALUE
      INTEGER * 4 MTMIDFIL        ! TRANSACTION MASTER IDENTIFICATION FILE
      INTEGER * 4 ASFIDFIL        ! AGENT SALES IDENTIFICATION FILE
      INTEGER * 4 MTXIDFIL        ! MATRIX IDENTIFICATION FILE
      INTEGER * 4 REPIDFIL        ! REPORT IDENTIFICATION FILE
      INTEGER * 4 OFFIDFIL        ! OFF LINE FILE WITH MATRIX INFORMATION
      INTEGER * 4 BSSIDFIL        ! BETSLEEP SUMMARY IDENTIFICATION FILE
      INTEGER * 4 LBLIDFIL        ! BETSLEEP SUMMARY LABELS IDENTIFICATION FILE
C
      INTEGER * 4 DTRTMTX(RPTMAXGAM)     ! TOTAL NUMBER OF MATRIX TO DISTRIBUTE
      INTEGER * 4 TOTWEEKMTX(RPTMAXGAM)  ! TOTAL NUMBER OF MATRIX USED BY GAME
C
      LOGICAL USRGENFIL           ! USER GENERATE NEXT FILE: YES / NO
      LOGICAL USRUPDONL           ! USER UPDATE ON LINE INFORMATION: YES  / NO
      LOGICAL USRUPDOFF           ! USER UPDATE OFF LINE INFORMATION: YES  / NO
      LOGICAL USRGENRPT           ! USER GENERATE REPORT: YES / NO
      LOGICAL USRCHKOVF           ! USER CHECK OVERFLOW ERROR: YES / NO
C
      CHARACTER * 70 FMTSMRINF        ! FORMATED SUMMARY INFORMATION
      CHARACTER * 35 FMTLBLINF(3, 9)  ! FORMATED SUMMARY LABELS INFORMATION
C
C COMMOM DEFINITIONS ( TO WORK WITH PROGRAM )
C
      INTEGER * 4 UPDMTX(MAXTOT,  MAXTIPW, MAXWEK, RPTMAXGAM, MAXWAG, NUMAGT)
      INTEGER * 4 WAGTBLPOS(MAXWAG)
      INTEGER * 4 AGTUPD(NUMAGT)          ! UPDATED AGENT
      INTEGER * 4 ASFFDB(7)               ! ASF FILE DESCRIPTOR BLOCK
      INTEGER * 4 MFCFDB(7)               ! MCF FILE DESCRIPTOR BLOCK
C
C COMMOM DEFINITIONS ( USER CONTROL )
C
      COMMON / MATRIZ_AGT_CTL / UPDMTX, WAGTBLPOS, AGTUPD, ASFFDB, MFCFDB
      COMMON / MATRIZ_AGT_CTL / MTXFILNAME, REPCDC, MTMIDFIL, ASFIDFIL
      COMMON / MATRIZ_AGT_CTL / MTXIDFIL, REPIDFIL, OFFIDFIL, BSSIDFIL, LBLIDFIL
      COMMON / MATRIZ_AGT_CTL / USRGENFIL, USRUPDONL, USRUPDOFF, USRGENRPT
      COMMON / MATRIZ_AGT_CTL / USRCHKOVF
      COMMON / MATRIZ_AGT_CTL / DTRTMTX, TOTWEEKMTX
C
C COMMOM DEFINITIONS ( TO PRINT SUMMARY / LABEL ) REPORT 
C
      COMMON / MATRIZ_AGT_CTL / FMTSMRINF, FMTLBLINF
C
C FUNCTIONS USED IN PROGRAM ( GET WEEK DAY STARTING FROM CDC )
C
      INTEGER * 4 GET_WEEK_DAY
      EXTERNAL GET_WEEK_DAY
C
C FUNCTIONS USED IN PROGRAM ( GET NEXT SATURDAY CDC STARTING FROM CDC )
C
      INTEGER * 4 GET_NEXT_SATURDAY_CDC
      EXTERNAL GET_NEXT_SATURDAY_CDC
C
C FUNCTIONS USED IN PROGRAM ( GET FREE IDENTIFICATION FILE )
C
      INTEGER * 4 GET_FREE_IDFIL
      EXTERNAL GET_FREE_IDFIL
C
C FUNCTIONS USED IN PROGRAM ( GET FORMATED DATE )
C
      CHARACTER * 8 GET_FORMATED_DATE
      EXTERNAL GET_FORMATED_DATE
C
C FUNCTIONS USED IN PROGRAM ( CALCULATES ASOCIATED DISTRICT TO ONE AGENT )
C
      INTEGER * 4 GET_AGENT_DISTRICT
      EXTERNAL GET_AGENT_DISTRICT
C
C END TO DEFINE VARIABLES TO GENERATE "CONTROLO DO MOVIMENTO" REPORT
C

