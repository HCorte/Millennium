C
C STOPCOM.DEF
C
C V08 14-FEB-2001 JHR ADDED GSALES_AUTO TO RUN GSALES LOADERS
C V07 23-JAN-2001 ANG ADDED OFFWINNERS FOR OFFLINE VALIDATIONS
C V06 11-APR-2000 UXN UPDTSK_BIGP ADDED, UPDTSK_AUTO CHANGED.
C V05 08-FEB-2000 OXK TSKGAM re-dimensioned MAXGAM->3*MAXIND (Vakio changes)
C V04 13-DEC-1999 OXK DRWGAM changed, DRWSTS added.
C V03 11-MAY-1999 UXN STOPCOM_CSB calculation added.
C V02 11-JAN-1999 GPW STOPSYS OPTIMISATION
C V01 13-NOV-1997 UXN Initial release.
C
C This common is used for automating WINRPT, BKKREP, SHARERPT and 
C also FBNKWN, FTRANS.
C  
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C This item is the property of GTECH Corporation, Providence, Rhode
C Island, and contains confidential and trade secret information. It
C may not be transferred from the custody or control of GTECH except
C as authorized in writing by an officer of GTECH. Neither this item
C nor the information it contains may be used, transferred,
C reproduced, published, or disclosed, in whole or in part, and
C directly or indirectly, except as expressly authorized by an
C officer of GTECH, pursuant to written agreement.
C
C Copyright 2000 GTECH Corporation. All rights reserved.
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C
C
          INCLUDE'INCLIB:PRMSTOP.DEF'          !V02
C
C
C WINREP - WINREP_AUTO(GAMENR) CONTAINS THE DRAW NUMBER OF THE GAME IF
C	   WINRPT SHOULD BE RUN FOR THIS GAME
C
	INTEGER*4	WINREP_AUTO(MAXGAM)
C
C BKKREP - BKKREP_AUTO(GAMENR) CONTAINS THE DRAW NUMBER OF THE GAME IF
C	   BKKREP AND BKKREP SHOULD BE RUN FOR THIS GAME.
C
	INTEGER*4	BKKREP_AUTO(MAXGAM)
C
C UPDTSK - UPDTSK(GAMENR) IS NON-ZERO IF THE UPDTSK WAS RUN FOR 
C	   THE GAME.
C
	INTEGER*4	UPDTSK_AUTO(MAXGAM,2)  ! MAX 2 UPDTSK PER INDEX
	INTEGER*4	UPDTSK_BIGP(MAXGAM,2)  ! MAX 2 UPDTSK PER INDEX
	INTEGER*4       UPDTSK_RUN_AGAIN       ! NEED TO RUN UPDTSK AGAIN
C
C SHARETSK - SHARETSK(GAMENR) IS NON-ZERO IF THE SHARECLC WAS RUN FOR 
C	   THE GAME.

	INTEGER*4	SHARERPT_AUTO(MAXGAM)
C
C GSALES LOADERS, IF NOT CERO WE HAVE TO RUN GSALES LOADER
C
        INTEGER * 4 GSALES_AUTO(MAXGAM)
C
C INVOICE_DAY - .TRUE. IF INVCLC WAS RUN, .FALSE. OTHERWISE.
C
	LOGICAL*4	INVOICE_DAY
C
	INTEGER*4       WINREP_AUTO_OFF,BKKREP_AUTO_OFF
	INTEGER*4       UPDTSK_AUTO_OFF, UPDTSK_BIGP_OFF,UPDTSK_RUN_AGAIN_OFF
	INTEGER*4       SHARERPT_AUTO_OFF, GSALES_AUTO_OFF, INVOICE_DAY_OFF
	PARAMETER      (WINREP_AUTO_OFF=1)
	PARAMETER      (BKKREP_AUTO_OFF=WINREP_AUTO_OFF+MAXGAM)
	PARAMETER      (UPDTSK_AUTO_OFF=BKKREP_AUTO_OFF+MAXGAM)
	PARAMETER      (UPDTSK_BIGP_OFF=UPDTSK_AUTO_OFF+MAXGAM*2)
	PARAMETER      (UPDTSK_RUN_AGAIN_OFF=UPDTSK_BIGP_OFF+MAXGAM*2)
	PARAMETER      (SHARERPT_AUTO_OFF=UPDTSK_RUN_AGAIN_OFF+1)
        PARAMETER      (GSALES_AUTO_OFF = SHARERPT_AUTO_OFF + MAXGAM)
	PARAMETER      (INVOICE_DAY_OFF = GSALES_AUTO_OFF + MAXGAM)
C
	COMMON/STOPCOM/ WINREP_AUTO,
     *                  BKKREP_AUTO,
     *                  UPDTSK_AUTO,
     *                  UPDTSK_BIGP,
     *                  UPDTSK_RUN_AGAIN,
     *                  SHARERPT_AUTO,
     *                  GSALES_AUTO,
     *                  INVOICE_DAY
C
C WINREP_AUTO:			4*MAXGAM
C BKKREP_AUTO:			4*MAXGAM
C UPDTSK_AUTO:			4*MAXGAM
C SHARERPT_AUTO:		4*MAXGAM
C GSALES_AUTO:                  4*MAXGAM
C INVOICE_DAY:			4
C----------------------------------------
C TOTAL(PART I):		4*(5*MAXGAM+1) 	
C
C
C TSKCNT(MAXWTSK)         - NUMBER OF WINESLS PER TASK                        15
C TSKGAM(3*MAXIND,MAXWTSK)- GAME NUMBERS PER TASK
C	 3*MAXIND because WINTSK takes care of TLTO, TKIK and TSPT
C TSKVOL(MAXWTSK)         - DRAW FILE DISK NAMES                              15
C STOPMOD                 - MANUAL/MULTI WINSEL FLAG (0-MAN,1-MULT)            1
C WINCNT                  - # OF WINSEL TASKS TODAY                            1
C WINWTSK(MAXMVLF)        - LIST OF WINTSK NUMBERS TO BE ACTIVATED TODAY      11
C VLWNBR(MAXWTSK)         - INDEX TO VLWnn (0 - no Winsel today)              15
C TCWNBR(MAXWTSK)         - INDEX TO TCWnn (0 - no Winsel today)              15
C DRWGAM(MAX_WINSEL,MAXGAM) - DRAW # PER GAME                                 45
C DRWSTS(MAX_WINSEL,MAXGAM) - DRAWSTATUS PER GAME                        
C
C
      INTEGER * 4 TSKCNT(MAXWTSK)
      INTEGER * 4 TSKGAM(3*MAXIND,MAXWTSK)
      INTEGER * 4 TSKVOL(MAXWTSK)      
      INTEGER * 4 STOPMOD
      INTEGER * 4 WINCNT
      INTEGER * 4 WINWTSK(MAXWTSK)
      INTEGER * 4 VLWNBR(MAXWTSK)
      INTEGER * 4 TCWNBR(MAXWTSK)
      INTEGER * 4 DRWGAM(MAX_WINSEL,MAXGAM)
      INTEGER * 4 DRWSTS(MAX_WINSEL,MAXGAM)
      INTEGER * 4 MLWININD
C
C---------- DRAW FILES ---------------------
C
      CHARACTER * 20 CBUFF(MAXF1*MAXWTSK)
      INTEGER * 4   BUFF(5,MAXF1*MAXWTSK)
      EQUIVALENCE (CBUFF,BUFF)
      INTEGER * 4 FCNT(MAXWTSK)               !# OF DRAW FILES PER WINTSK
      INTEGER * 4 BUFTYP(MAXF1*MAXWTSK)       !TYPE OF DRAW FILE
C
C---------- ASF BITLOCK ------------------
C
      INTEGER * 4 ASFLOCK                     !BIT MAP OF ASF FILE ACCESS
C
C---------- STATUS OF TASKS---------------

      INTEGER * 4 STSTSK(MAXWTSK)             !STATUS OF VLF TASKS
      INTEGER * 4 TSKTCFSTS(MAXWTSK)          !STATUS OF TCF TASKS
      INTEGER * 4 VLWSTS(MAXMVLF)             !STATUS OF VLWnn FILES
      INTEGER * 4 TCWSTS(MAXMTCF)             !STATUS OF TCWnn FILES
      INTEGER * 4 VLCSTS, TCCSTS              !STATUS OF VLC/TCC
      INTEGER * 4 MRGTYP(MAXWTSK)             !TYPE OF REQUIRED MRGTSK 
      INTEGER * 4 VLWNAM(5,MAXMVLF)           !VLW FILE NAMES
      INTEGER * 4 TCWNAM(5,MAXMTCF)           !TCW FILE NAMES
      INTEGER * 4 VLFTSKSTS                   !STATUS OF VLFTSK
      INTEGER * 4 OFFWINNERS                  !TOTAL OF OFFLINE VALIDATIONS
C
      INTEGER*4 STOPMOD_OFF,TSKCNT_OFF,TSKGAM_OFF,TSKVOL_OFF
      INTEGER*4 WINCNT_OFF, WINWTSK_OFF,VLWNBR_OFF,TCWNBR_OFF
      INTEGER*4 DRWGAM_OFF,DRWSTS_OFF,MLWININD_OFF,BUFF_OFF
      INTEGER*4 BUFTYP_OFF, FCNT_OFF, STSTSK_OFF
      INTEGER*4 TSKTCFSTS_OFF,VLWSTS_OFF,TCWSTS_OFF,TCCSTS_OFF
      INTEGER*4 VLCSTS_OFF,MRGTYP_OFF,VLWNAM_OFF,TCWNAM_OFF,ASFLOCK_OFF
      INTEGER*4 VLFTSKSTS_OFF,OFFWINNERS_OFF
      INTEGER*4 FREE_OFF
C
      PARAMETER (STOPMOD_OFF=INVOICE_DAY_OFF+1)
      PARAMETER (TSKCNT_OFF=STOPMOD_OFF+1)
      PARAMETER (TSKGAM_OFF=TSKCNT_OFF+MAXWTSK)
      PARAMETER (TSKVOL_OFF=TSKGAM_OFF+MAXGAM*MAXWTSK)
      PARAMETER (WINCNT_OFF=TSKVOL_OFF+MAXWTSK)
      PARAMETER (WINWTSK_OFF=WINCNT_OFF+1)
      PARAMETER (VLWNBR_OFF=WINWTSK_OFF+MAXWTSK)
      PARAMETER (TCWNBR_OFF=VLWNBR_OFF+MAXWTSK)
      PARAMETER (DRWGAM_OFF=TCWNBR_OFF+MAXWTSK)
      PARAMETER (DRWSTS_OFF=DRWGAM_OFF+MAX_WINSEL*MAXGAM)
      PARAMETER (MLWININD_OFF=DRWSTS_OFF+MAX_WINSEL*MAXGAM)
      PARAMETER (BUFF_OFF=MLWININD_OFF+1)
      PARAMETER (BUFTYP_OFF=BUFF_OFF+5*MAXF1*MAXWTSK)
      PARAMETER (FCNT_OFF=BUFTYP_OFF+MAXF1*MAXWTSK)
      PARAMETER (STSTSK_OFF=FCNT_OFF+MAXWTSK)
      PARAMETER (TSKTCFSTS_OFF=STSTSK_OFF+MAXWTSK)
      PARAMETER (VLWSTS_OFF=TSKTCFSTS_OFF+MAXWTSK)
      PARAMETER (TCWSTS_OFF=VLWSTS_OFF+MAXMVLF)
      PARAMETER (TCCSTS_OFF=TCWSTS_OFF+MAXMTCF)
      PARAMETER (VLCSTS_OFF=TCCSTS_OFF+1)
      PARAMETER (MRGTYP_OFF=VLCSTS_OFF+1)
      PARAMETER (VLWNAM_OFF=MRGTYP_OFF+MAXWTSK)
      PARAMETER (TCWNAM_OFF=VLWNAM_OFF+5*MAXMVLF)
      PARAMETER (ASFLOCK_OFF=TCWNAM_OFF+5*MAXMTCF)
      PARAMETER (VLFTSKSTS_OFF=ASFLOCK_OFF+1)
      PARAMETER (OFFWINNERS_OFF=VLFTSKSTS_OFF+1)
      PARAMETER (FREE_OFF=OFFWINNERS_OFF+1)

      COMMON/STOPCOM/STOPMOD,
     *               TSKCNT,
     *               TSKGAM,
     *               TSKVOL,
     *               WINCNT,                
     *               WINWTSK,
     *               VLWNBR,
     *               TCWNBR,
     *               DRWGAM,
     *               DRWSTS,
     *		     MLWININD,
     *               BUFF,
     *               BUFTYP,
     *               FCNT,
     *               STSTSK,
     *               TSKTCFSTS,
     *               VLWSTS,
     *               TCWSTS,
     *               TCCSTS,
     *               VLCSTS,
     *               MRGTYP,
     *               VLWNAM,
     *               TCWNAM,
     *               ASFLOCK,
     *               VLFTSKSTS,
     *               OFFWINNERS
C
	INTEGER*4 STOPLEN
	PARAMETER (STOPLEN = FREE_OFF-1)

	INTEGER*4 ISTOPSEC
	PARAMETER (ISTOPSEC = STOPLEN/128+1)
	
	INTEGER*4 STOPSEC
	PARAMETER (STOPSEC = ISTOPSEC*2)
	
	INTEGER*4 FREESIZ
	PARAMETER (FREESIZ = STOPSEC*64-STOPLEN)
	    
	INTEGER*4 FREE
	COMMON /STOPCOM/ FREE(FREESIZ)
C
	INTEGER*4	STOPCOM_CSB
	PARAMETER	(STOPCOM_CSB=STOPSEC*64/2048+1)
	INTEGER*4	STOPCOM_BLK(2048,STOPCOM_CSB)
C
	EQUIVALENCE	(STOPCOM_BLK(1,1),WINREP_AUTO)
	INTEGER*4	 FRST_STOPCOM(2)
	EQUIVALENCE	(FRST_STOPCOM,STOPCOM_BLK(1,1))
	INTEGER*4	 LAST_STOPCOM
	EQUIVALENCE	(LAST_STOPCOM,STOPCOM_BLK(2048,STOPCOM_CSB))
C
	VOLATILE /STOPCOM/
C
