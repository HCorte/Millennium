C POOLLTO.DEF
C  
C V11 10-FEB-2000 OXK LTNUMPAG=20 (Vakio changes)
C V10 02-FEB-2000 OXK LTNUMGAMES=8 (Vakio changes)
C V09 17 Apr 1996 HXK Release of Finland for X.25, Telephone Betting, 
C			Instant Pass Thru Phase 1
C V08 06 Nov 1995 PXB Now has local maxtyp parameter.
C V07 19 May 1993 HXN Resize LTNUMGAMES, LTNUMPAG, LTOSEC, LQUE1, BNKQ.
C V06 21 Jan 1993 DAB Initial Release
C			Based on Netherlands Bible, 12/92, and Comm 1/93 update
C			DEC Baseline
C V05 19-MAY-1993 HHN INITIAL RELEASE FOR FINLAND. 
C			RESIZE
C			LTNUMGAMES=6     TO  LTNUMGAMES=3
C			LTNUMPAG  =6     TO  LTNUMPAG  =9
C			LTOSEC    =1     TO  LTOSEC    =7872
C			LQUE1     =100   TO  LQUE1     =120000
C			BNKQ      =100   TO  BNKQ      =25004
C V04 07-OCT-1991 MTK INITIAL RELEASE FOR NETHERLANDS
C V03 10-JUL-1991 KWP RELEASE FOR POLAND
C			THIS RELEASE OF POOLLTO.DEF SHRINKS THE SIZE OF MEMORY
C			THAT LOTTO POOLS NEEDS BY CHANGING THE VARIABLE
C			LTOSEC TO 1 FROM 7872 AS WELL AS CHANGING THE SIZE OF
C			A FEW OTHER VARIABLES( AS NOTED BELOW). TO USE LOTTO 
C			POOLS THE CHANGED VARIABLES WOULD HAVE TO CHANGED BACK 
C			AND A LOTGEN PERFORMED.
C V02 08-APR-1991 MP  ELIMINATED NON-USED LOCAL VARIABLE 'LTSTSTAT'
C V01 01-AUG-1990 XXX RELEASED FOR VAX
C
C
C   POOLLTO.DEF - DEFINES THE COMMON USED IN CALCULATING THE LOTTO
C                POOLS.
C                ALSO CONTAINS THE FILE STRUCTURE FOR LOTTO
C                POOL FILE.
C
C        ALL MAXIMUM GAME PARAMETERS ARE PUT BETWEEN ####### BRACKETS
C
C        ALL GAME DEPENDENT PARAMETERS THAT HAVE TO BE SET TO PROCESS
C        CURRENT GAME ARE IN BETWEEN $$$$$$$ BRACKETS
C
C=====================================================================
C
C    (LTOSEC) -  PAGE SIZE WILL BE DIVISABLE BY 64 (SECTORS)
C
C    LTOPOOL.FIL WILL BE OPENED BY TWO DIFFERENT BLOCKING FACTORS
C    BY TWO DIFFERENT TASKS:
C          1. POOLPRO WILL OPEN THE FILE TO HAVE LTOSEC SECTORS
C             PER PAGE. THERE WILL BE LTNUMPAG DATA PAGES TO HANDLE
C             POOL PROCESSING AND CHECK POINT MAINTENANCE.
C             1 PAGE = LTOSEC SECTORS
C
C          2. OVERPRO WILL OPEN THE FILE TO HAVE 32 SECTORS PER PAGE.
C             THIS TASK WILL STORE THE CHECK POINT OVERFLOW TABLE AND
C             CHECK POINT HEADER INFORMATION BEFORE THE "N" DATA
C             PAGES THAT POOLPRO STORES.
C             1 PAGE = 32 SECTORS
C
C    OFFSIZE = MAX NUMBER OF OFFSETS CONTAINED IN A PAGE.
C--------------------------------------------------------------------
C    LTCURPAG = CURRENT DATA PAGE IN MEMORY
C
C    LTOVR - TABLE FOR COBINATIONS BET MORE THAT OVERFLOW
C
C    OVRBLK = ACTUAL BLOCK TO BE WRITTEN TO OVERFLOW FILE
C
C    LSTOVR = LAST OVERFLOW USED
C
C    LSAVOVR - SAVE AREA FOR LTOVR FOR CHECKPOINT
C
C    LSAVLST - SAVE AREA FOR LSTOVR FOR CHECKPOINT
C
C    LSAVBLK - SAVE AREA FOR OVRBLK FOR CHECKPOINT
C
C
C    NOTE !!! - LTOVR,LSTOVR,OVRBLK AND LSAVOVR,LSAVLST,LSAVBLK ARE
C               IN THE SAME ORDER IN COMMON !!!!!!
C
C
C
C    LTQNUM = QUEUE INDEX POOLPRO USES TO MAINTAIN LOTTO POOL
C           CONSISTENTCY WITH CHECK POINT PROCESSING.
C
C    LTCURPAG = DATA PAGE THAT IS CURRENTLY IN MEMORY
C
C    LCHKPNT = LOTTO POOL PROCESSING PHASE FLAG USED TO HANDLE
C              CHECKPOINT PROCESSING.
C
C
C    LCHKFIL = CHECK POINT FILE NUMBER TO FLUSH LOTTO POOL DATA.
C
C    LCHKSER = LAST LOTTO SERIAL NUMBER TO BE PROCESSED AT CHKPNT.
C
C    LCHKSTOP - FLAG TO FINISH AND/OR SUSPEND PROCESSING BY POOLPRO
C               AND OVRPRO
C
C    LTSKSTAT = STATUS OF POOLPRO AND OVERPRO TASKS
C
C     GAME DEPENDENT INFORMATION
C
C
C--------------------------------------------------------------------
C
C
C
C     PARAMETERS BELOW MAY BE ADJUSTED TO ACCOMODATE "WORST" CASE GAME
C     EACH PARAMETER IS ACCOUNTED INDIVIDUALLY ##########
C
C
C
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C This item is the property of GTECH Corporation, Providence, Rhode
C Island, and contains confidential and trade secret information. It
C may not be transferred from the custody or control of GTECH except
C as authorized in writing by an officer of GTECH. Neither this item
C nor the information it contains may be used, transferred,
C reproduced, published, or disclosed, in whole or in part, and
C directly or indirectly, except as expressly authorized by an
C officer of GTECH, pursuant to written agreement.
C
C Copyright 1991 GTECH Corporation. All rights reserved.
C+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C

	INTEGER*4  LTNUMGAMES, LTPOOL_MAXSHR
	PARAMETER (LTNUMGAMES=8)     !NUMBER OF GAMES USING POOLS. LOTTO,VIKING,VAKIO.
	PARAMETER (LTPOOL_MAXSHR=20) !MAX # OF SHARES FOR ANY GAME    

	INTEGER*4  LTPOOL_MAXTYP
	PARAMETER (LTPOOL_MAXTYP=12)
C
C     END OF GAME DEPENDENT PARAMETERS   ###########
C
	INTEGER*4 LTNUMPAG
	PARAMETER(LTNUMPAG=20)                  !ALL OF IT ON N PAGES
C
C SEE *V03* NOTE ABOVE: VARIABLE CHANGED DUE TO MEMORY REQUIREMENTS
C
	INTEGER*4  LTOSEC
	PARAMETER (LTOSEC=7872)                !# OF CONCURRENT SECTORS PER PAGE.
C       SO WHEN CALLING IOINIT WE SHOULD USE IOINIT (..., LTOSEC*256)
C***	PARAMETER (LTOSEC=1)		       !SEE *V03* NOTE ABOVE
C                               SHOULD BE DIVISABLE BY 64
	INTEGER*4 PAGESIZE
	PARAMETER(PAGESIZE = LTOSEC*64)        !PAGE SIZE-IN FULL WORDS
C       PARAMETERS BELOW ARE USED BY CHECKPOINT TASK ONLY
C
C     END OF CHECKPOINT PARAMETERS
C
	INTEGER*4 OFFSIZE
	PARAMETER(OFFSIZE = PAGESIZE*8)   !SO MANY COMBINATIONS (1 NIB EACH) STORED
C                                         !IN 1 PAGE.
C SEE *V03* NOTE ABOVE: VARIABLE CHANGED DUE TO MEMORY REQUIREMENTS
C
	INTEGER*4 LQUE1, BNKQ
	PARAMETER(LQUE1 = 120000+QHEDSZ)       !ENTRIES IN QUEUE 1
	PARAMETER(BNKQ  =  25004+QHEDSZ)       !ENTRIES IN BANK 1,2,3 --> BANKSORT
C***	PARAMETER(LQUE1 =  100+QHEDSZ)	       !SEE *V03* NOTE ABOVE
C***	PARAMETER(BNKQ  =  100+QHEDSZ)	       !SEE *V03* NOTE ABOVE
C
	INTEGER*4 MAXOVR
	PARAMETER(MAXOVR = 1024)               !MAXIMUM # OF OVERFLOWS
C                                              !DO NOT CHANGE THIS
	INTEGER*4 AMAXOVR, RMAXOVR, AOVRQUE, ROVRQUE, LCHKSIZ
	PARAMETER(AMAXOVR = 4096)              !QUEUE LENGTH OF ADDOVR
	PARAMETER(RMAXOVR = 1024)              !QUEUE LENGTH OF REMOVR
	PARAMETER(AOVRQUE = AMAXOVR+QHEDSZ)    !LENGTH OF ADD/REMOVE QUE
	PARAMETER(ROVRQUE = RMAXOVR+QHEDSZ)    !LENGTH OF REMOVE QUE
	PARAMETER (LCHKSIZ=2048)               !SIZE OF CHECKPOINTABLE
C                                              !DATA BLOCKS(FULLWORDS)
C
	INTEGER*4  BANKSORT
	PARAMETER (BANKSORT = LTNUMPAG-1)  !NUMBER OF QUEUS FOR SORT
C                                        ;POOLS TO UPDATE
	INTEGER*4 LTOQ1(LQUE1,2)            !QUEUE TO QUEUE COMBINATIONS
C                              FROM WAGERING TASK, DEQUEUED BY POOLPRO
	INTEGER*4 BANK(BNKQ,BANKSORT)  !INTERNAL QUEUE FOR SORTING
C                              COMBINATIONS BETWEEN PAGES (POOLPRO)
	INTEGER*4 ADDOVR(AOVRQUE,2),REMOVR(ROVRQUE,2) !ADD/REMOVE
C            OVERFLOWS QUEUES (QUEUED BY POOLPRO, REMOVED BY OVERPRO)
	INTEGER*4 LTOVR(2,MAXOVR,LTNUMGAMES)      !TABLE WITH OVERFLOWS
	INTEGER*4 LSAVOVR(2,MAXOVR,LTNUMGAMES) !OVERFLOWS SAVE AREA - CHECKPOINT
	INTEGER*4 OVRSPARE(91)       !SPARE AREA
     *	         ,OVRSPARE1(55)
	INTEGER*4 LTPAGE(PAGESIZE)    !TABLE TO KEEP PAGE OF DATA
	INTEGER*4 OVRBLK              !OVERFLOW BLOCK ON DISK
	INTEGER*4 LTLSTOVR(LTNUMGAMES)          !LAST OVERFLOW IN TABLE
	INTEGER*4 LTQNUM              !CURRENT QUEUE NUMBER USED
C                         TO QUEUE COMBINATIONS BY WAGERING TASK
	INTEGER*4 LSAVBLK,LTSAVLST(LTNUMGAMES)   !SAVE ARE FOR OVRBLK AND
	INTEGER*4 LTPOOL_TOT(LTNUMGAMES)  !TOTALS FOR THE GAME
	INTEGER*4 SAVLTPOOL_TOT(LTNUMGAMES) !SAME IN SAVE AREA
C                                   ;LSTOVR FOR CHECKPOINT
	INTEGER*4 LCHKFIL             !CHEKPOINT FILE TO LOAD TO
C                                    SET BY CHKSYS
	INTEGER*4 LCHKSER             !CHECKPOINT SERIAL # (SET CHKSYS)
C
C
	INTEGER*4 LCHKSTOP       !STOP/SUSPEND POOLPRO,OVERPRO PROCESS
	   INTEGER*4 LSTOP, LSUSPPOL, LSUSPOVR, LSUSPDON, LRESTART
	   PARAMETER(LSTOP=1)    !FINISH PROCESSING,STOP POOLPRO,OVERPRO
	   PARAMETER(LSUSPPOL=2) !SUSPEND POOLPRO, POOLPRO WILL SET IT
C                              ;TO 3 AND INITIALISE LTOQ1
	   PARAMETER(LSUSPOVR=3) !SUSPEND OVERFLO AND SET LCHKSTOP TO 0
C                              ;AND REINITIALISE ADDOVR AND REMOVR
	   PARAMETER(LSUSPDON=4) !OVERPRO IS SUSPENDED AND REINITIALIZED
C                              ;LTOQ1,BANK,ADDOVR,REMOVR QUEUES
	  PARAMETER(LRESTART=5)  !SUSPENSION TERMINATED
C                               POOLPRO WILL REINITIALIZE QUEUES AND
C                               WILL CLEAR LCHKSTOP
C
C        AFTER ALL SUSPEND PROCESS IS FINISHED LCHKSTOP IS SET TO 0
C        BY EXTERNAL CONTOL PROCESS (RESET,NETMGR,POOLSEE)
C
C     LCHKPNT FLAG IS CONTROLLED BY PARAMETERS BELOW. COMMENTS
C     TELL WHICH TASK IS IN CONTROL OF THE FLAG AND WHICH TASK WILL
C     ASSUME CONTROL AFTER TASK BEING IN CONTROL
C
	INTEGER*4 LCHKPNT       !CHECKPOINT FLAG
	  INTEGER*4 LCMDCHK, LOVRCHK, LLODCHK, LCHKSTR
	  PARAMETER(LCMDCHK = 1)  !SET BY CMDPRO FOR POOLPRO TO FINISH
C                           ;PROCESS ACTUAL BANK AND SWITH TO ANOTHER
	  PARAMETER(LOVRCHK = 2)  !SET BY POOLPRO FOR OVRPRO TO START
C                               ;LAST PHASE OF CHECKPOINT
	  PARAMETER(LLODCHK = 3)  !SET BY OVERPRO FOR CHECKPOINT TASK TO
C                               ;LOAD DATA FROM RAM DISK TO DISK
C
	  PARAMETER(LCHKSTR = 0)  !FINISHED CHKPNT PROCESS
C
	INTEGER*4 LTCURPAG       !CURRENT PAGE IN MEMORY
C
C     GAME DEPENDENT DATA
C
C
C     ACTUAL GAME PARAMETERS $$$$$$$$$$$$$$$$$$$$$$$
C
	INTEGER*4 LTPOOLFILES(LTNUMGAMES)  !.NON.0 IF POOLS NOT MERGED
	INTEGER*4 LTPOOLDRAW(LTNUMGAMES)      !CURRENT LOTTO DRAW
	INTEGER*4 LTPOOLNR(LTNUMGAMES)       !RANGE OF NUMBER DRAWN
C                              ;E.G. 49 FOR 6 OF 49
	INTEGER*4 LTPOOLBET(LTNUMGAMES)      !NR OF NUMBER BET
C                              ;E.G 6 FOR 6 OF 49
	INTEGER*4 LTPOOLFLAGS(LTNUMGAMES)   !NUMBER OF LTPOOLFLAG FLAGS
C                              ;E.G. 7 FOR MATCH 6, 5+, 5,4 AND 3
	INTEGER*4 LTPOOLFLAG(LTPOOL_MAXSHR,LTNUMGAMES)  !WINNING FLAGS
C                              ;FOR GAME AS FOR LTPOOLFLAGS
C                              ;1,1,1,0,1,0,1,13*0
C MATCH ALL,ALL -1 +BONUS, ALL -1, ALL -2, ALL-3
C
	INTEGER*4 LTPOOL_BASEOFF(LTNUMGAMES) !BASE OFFSET FOR GAME
	INTEGER*4 LTPOOL_GAMPAG(LTNUMGAMES)  !1 ST PAGE FOR THE GAME
	INTEGER*4 LTPOOL_GAMLIMIT(LTNUMGAMES) !MAX # OF CMB IN MEM UNIT
C                              ;15 FOR NIBLE, 255 FOR BYTE
	INTEGER*4 LTPOOL_BONUS(LTNUMGAMES)  !# OF BONUS NRS DRAWN XXX
C
	INTEGER*4 LTPOOL_PAGGAM(LTNUMPAG)    !GAME FOR THE PAGE
	INTEGER*4 LTPOOL_INWORD(LTNUMPAG)    !NUMBER OF OFFSETS IN WORD
	INTEGER*4 LTPOOL_PAGBASE(LTNUMPAG)   !BASE PAGE # FOR GAME
	INTEGER*4 LTPOOL_OFFSETBASE(LTNUMPAG)   !BASE OFFSET # FOR GAME
	INTEGER*4 LTPOOL_PAGESTART(LTNUMPAG)  !STARTING OFFSET FOR PAGE
	INTEGER*4 LTPOOL_GAMENR(LTPOOL_MAXTYP,MAXIND) !CORRESPONDING
C                                      ;GAME TYPE AND INDEX FOR GAME
	INTEGER*4 LTSKSTAT, LDUMMY1
C
C
C     END OF ACTUAL GAME PARAMETERS $$$$$$$$$$$$$$$$$$$
C
C     THERE ARE CERTAIN RESTRICTIONS ON ORDER OF VARIABLES IN THE
C     COMMON, LTOVR,OVRBLK,LTLSTOVR SAND ITS SAVE ARES SHOULD BE
C     BEFORE LTPAGE. GAME DEPENDENT PARAMETERS SHOULD BE ALSO BEFORE
C     LTPAGE. OVRBLK SHOULD FOLLOW LTOVR
C
C
	COMMON /POOLLTO/ LTOQ1,BANK,ADDOVR,REMOVR,LTOVR,OVRBLK,LTLSTOVR
     !	  ,LTPOOL_TOT
     !	  ,OVRSPARE1,LSAVOVR,LSAVBLK,LTSAVLST,SAVLTPOOL_TOT,OVRSPARE
     !	  ,LTPOOL_BASEOFF,LTPOOL_GAMPAG,LTPOOL_BONUS
     !	  ,LTPOOL_INWORD,LTPOOL_PAGBASE,LTPOOL_GAMLIMIT
     !	  ,LTPOOL_OFFSETBASE,LTPOOL_PAGESTART,LTPOOLNR,LTPOOLBET
     !	  ,LTPOOLDRAW,LTPOOLFILES
     !	  ,LTPOOLFLAGS,LTPOOLFLAG,LTPOOL_PAGGAM,LTPOOL_GAMENR
     !	  ,LTPAGE,LTQNUM,LTCURPAG
     !	  ,LCHKPNT,LDUMMY1,LCHKFIL,LCHKSER,LCHKSTOP,LTSKSTAT
C
C
	INTEGER*4	 FRST_POOLLTO(2)
	EQUIVALENCE	(FRST_POOLLTO, LTOQ1)
	INTEGER*4	 LAST_POOLLTO
	EQUIVALENCE	(LAST_POOLLTO, LTSKSTAT)
C
	VOLATILE /POOLLTO/
C
